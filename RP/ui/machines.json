{
    "namespace": "machines",
	
	"slots_panel": {
        "type": "panel",
        "size": [ 18, 18 ],
        "clips_children": true
	},
	"slots": {
		"type": "grid",
		"size": [ 18, 18 ],
		"grid_item_template": "chest.chest_grid_item",
        "collection_name": "container_items"
	},
	"texts": {
		"type": "stack_panel",
		"factory":{
			"name": "buttons",
			"control_name": "('machines.' + $machine + '_text')"
		},
		"collection_name": "container_items",
		"bindings": [
			{
				"binding_name": "(#zero + 20)",
				"binding_name_override": "#collection_length"
			}
		]
	},
	"hovers": {
		"type": "stack_panel",
		"factory":{
			"name": "buttons",
			"control_name": "('machines.' + $machine + '_hover')"
		},
        "collection_name": "container_items",
		"bindings": [
			{
				"binding_name": "(#zero + 20)",
				"binding_name_override": "#collection_length"
			}
		]
	},
	"fill_level": {
		"type": "stack_panel",
		"factory":{
			"name": "buttons",
			"control_name": "('machines.' + $machine + '_fill')"
		},
		"collection_name": "container_items",
		"bindings": [
			{
				"binding_name": "(#zero + 20)",
				"binding_name_override": "#collection_length"
			}
		]
	},
	"slot_overlay": {
		"$color": [1, 1, 1],
		"$uv": [0, 0],
		"type": "panel",
		"anchor_to": "center",
		"anchor_from": "center",
		"size": [ 18, 18 ],
		"layer": 10,
		"controls": [
			{
				"image": {
					"type":"image",
					"color": "$color",
					"uv": "$uv", "uv_size": [16, 16],
					"fill":true,
					"size": [16, 16],
					"anchor_from": "top_middle",
					"anchor_to": "top_middle",
					"texture": "$texture"
				}
			}
        ]
    },
    "interface": {
        "type": "panel",
		"$size": ["100%", "100%"],
        "controls": [
            { "container_gamepad_helpers@common.container_gamepad_helpers": {} },
            { "selected_item_details_factory@common.selected_item_details_factory": {} },
            { "item_lock_notification_factory@common.item_lock_notification_factory": {} },
            {
                "root_panel@common.root_panel": {
                    "layer": 1,
                    "controls": [
                        { "common_panel@common.common_panel": {
							"size": "$size",
							"anchor_from": "bottom_left",
							"anchor_to": "bottom_left"
						} },
                        {
                            "panel": {
                                "type": "panel",
                                "layer": 5,
                                "controls": [
                                    { "top_half@machines.$machine": {} },
                                    { "bottom_half@common.inventory_panel_bottom_half_with_label": {} },
                                    { "hotbar_grid@common.hotbar_grid_template": {} },
                                    { "inventory_take_progress_icon_button@common.inventory_take_progress_icon_button": {} }
                                ]
                            }
                        },
                        { "inventory_selected_icon_button@common.inventory_selected_icon_button": {} },
                        { "gamepad_cursor@common.gamepad_cursor_button": {} }
                    ]
                }
            }
        ]
    },
	
	"coal_generator_text@furnace.furnace_label": {
		"anchor_to": "center",
		"anchor_from": "center",
		"text": "#text",
		"bindings": [
			{
				"binding_name": "#hover_text",
				"binding_name_override": "#heat",
				"binding_type": "collection",
				"binding_collection_name": "container_items"
			},
			{
				"binding_type": "view",
				"source_property_name": "(#heat - 'cosmos:' - '§o' - '§f' )",
				"target_property_name": "#text"
			},
			{
				"binding_type": "view",
				"source_property_name": "(not(#heat - 'cosmos:' = #heat))",
				"target_property_name": "#visible"
			}
		]
	},
	
	"energy_hover@cosmos.button": {
		"$action": "",
		"size": [53, 9],
		"anchor_from": "top_left",
		"anchor_to": "top_left",
		"controls": [
			{
				"hover": {
					"type": "custom",
					"renderer": "hover_text_renderer",
					"layer": 50,
					"bindings": [
						{
							"binding_name": "#hover_text",
							"binding_type": "collection",
							"binding_collection_name": "container_items"
						},
						{
							"binding_type": "view",
							"source_property_name": "(#hover_text - '§o')",
							"target_property_name": "#hover_text"
						}
					]
				}
			}
		],
		"bindings": [
			{
				"binding_name": "#hover_text",
				"binding_type": "collection",
				"binding_collection_name": "container_items"
			},
			{
				"binding_type": "view",
				"source_property_name": "(not(#hover_text - 'Energy Storage' = #hover_text))",
				"target_property_name": "#visible"
			}
		]
	},
	
	"fabricating_hover@cosmos.button": {
		"$action": "",
		"size": [53, 12],
		"anchor_from": "top_left",
		"anchor_to": "top_left",
		"controls": [
			{
				"hover": {
					"type": "custom",
					"renderer": "hover_text_renderer",
					"layer": 50,
					"bindings": [
						{
							"binding_name": "#hover_text",
							"binding_type": "collection",
							"binding_collection_name": "container_items"
						},
						{
							"binding_type": "view",
							"source_property_name": "(#hover_text - '§o')",
							"target_property_name": "#hover_text"
						}
					]
				}
			}
		],
		"bindings": [
			{
				"binding_name": "#hover_text",
				"binding_type": "collection",
				"binding_collection_name": "container_items"
			},
			{
				"binding_type": "view",
				"source_property_name": "(not(#hover_text - 'Progress' = #hover_text))",
				"target_property_name": "#visible"
			}
		]
	},
	
	"energy_storage_text": {
		"type": "label",
		"text_alignment": "center",
		"color": "$title_text_color",
		"text": "#text",
		"bindings": [
			{
				"binding_name": "#hover_text",
				"binding_name_override": "#energy",
				"binding_type": "collection",
				"binding_collection_name": "container_items"
			},
			{
				"binding_type": "view",
				"source_property_name": "(#energy - 'cosmos:' - '§o' - '§f')",
				"target_property_name": "#text"
			},
			{
				"binding_type": "view",
				"source_property_name": "(not(#energy - 'cosmos:§.' = #energy))",
				"target_property_name": "#visible"
			}
		]
	},
	
	"energy_storage_fill": {
		"type": "panel",
		"size": [1, 0],
		"anchor_to": "top_left",
		"anchor_from": "top_left",
		"controls": [
			{
				"image": {
					"type": "image",
					"texture": "textures/ui/cosmos/progress_bar_fill",
					"color": [0, 0.8, 0],
					"size": [1, 5],
					"anchor_to": "top_left",
					"anchor_from": "top_left",
					"bindings": [
						{
							"binding_name": "#hover_text",
							"binding_name_override": "#energy",
							"binding_type": "collection",
							"binding_collection_name": "container_items"
						},
						{
							"binding_type": "view",
							"source_property_name": "(#energy - 'cosmos:f' - '§o' - '§f' )",
							"target_property_name": "#amount"
						},
						{
							"binding_type": "view",
							"source_property_name": "(not(#energy - 'cosmos:f' = #energy))",
							"target_property_name": "#visible"
						},
						{
							"binding_type": "view",
							"source_property_name": "#amount",
							"target_property_name": "#size_binding_x"
						}
					]
				}
			}
		]
	},
	"circuit_fabricator_fill": {
		"type": "panel",
		"size": [1, 0],
		"anchor_to": "top_left",
		"anchor_from": "top_left",
		"controls": [
			{
				"image": {
					"type": "image",
					"texture": "textures/ui/cosmos/progress_bar_fill",
					"color": [0.75, 0.66, 0.14],
					"size": [1, 9],
					"anchor_to": "top_left",
					"anchor_from": "top_left",
					"bindings": [
						{
							"binding_name": "#hover_text",
							"binding_name_override": "#energy",
							"binding_type": "collection",
							"binding_collection_name": "container_items"
						},
						{
							"binding_type": "view",
							"source_property_name": "(#energy - 'cosmos:§ener' - '§o' - '§f' )",
							"target_property_name": "#amount"
						},
						{
							"binding_type": "view",
							"source_property_name": "(not(#energy - 'cosmos:§ener' = #energy))",
							"target_property_name": "#visible"
						},
						{
							"binding_type": "view",
							"source_property_name": "#amount",
							"target_property_name": "#size_binding_x"
						}
					]
				}
			}
		]
	},
	"fabricator_fill": {
		"type": "panel",
		"size": [1, 0],
		"anchor_to": "top_left",
		"anchor_from": "top_left",
		"controls": [
			{
				"clipper": {
					"type": "panel",
					"clips_children": true,
					"offset": [1, 1],
					"size": [1, 10],
					"anchor_to": "top_left",
					"anchor_from": "top_left",
					"controls": [
						{
							"image": {
								"anchor_to": "top_left",
								"anchor_from": "top_left",
								"type": "image",
								"size": [51, 30],
								"texture": "textures/ui/cosmos/fabricating"
							}
						}
					],
					"bindings": [
						{
							"binding_name": "#hover_text",
							"binding_name_override": "#progress",
							"binding_type": "collection",
							"binding_collection_name": "container_items"
						},
						{
							"binding_type": "view",
							"source_property_name": "(#progress - 'cosmos:§prog' - '§o' - '§f' )",
							"target_property_name": "#amount"
						},
						{
							"binding_type": "view",
							"source_property_name": "(not(#progress - 'cosmos:§prog' = #progress))",
							"target_property_name": "#visible"
						},
						{
							"binding_type": "view",
							"source_property_name": "#amount",
							"target_property_name": "#size_binding_x"
						}
					]
				}
			}
		]
	},
    
    "coal_generator@furnace.furnace_panel_top_half": {
        "controls": [
			{ "label@furnace.furnace_label": {
				"text": "Coal Generator"
			}},
            {
                "coal_input@machines.slots": {
                    "offset": [ -50, 0 ],
					"grid_dimensions": [ 1, 1 ],
					"layer": 5
                }
            },
            {
                "fuel_overlay@machines.slot_overlay": {
                    "offset": [ -50, 1 ],
					"$texture": "textures/ui/extra_slots/fuel"
                }
            },
			{
				"arrow@crafting.crafting_arrow_large": {
					"anchor_to": "center",
					"anchor_from": "center",
					"offset": [-20, 0]
				}
			},
            {
                "heat_and_power@machines.texts": {
                    "offset": [ 10, 0 ],
                    "size": [ 18, 18 ],
					"layer": 4
                }
            }
        ]
    },
    
    "circuit_fabricator": {
		"type": "panel",
		"anchor_from": "top_left",
		"anchor_to": "top_left",
        "controls": [
			{ "label@furnace.furnace_label": {
				"text": "Circuit Fabricator",
				"offset": [ 10, -28 ],
				"anchor_from": "top_left",
				"anchor_to": "top_left"
			}},
			{
				"background": {
					"type": "image",
					"size": [155, 87],
					"offset": [0, -50],
					"texture": "textures/ui/cosmos/circuit_fabricator_background"
				}
			},
            {
                "diamond_input@machines.slots": {
					"anchor_from": "top_left",
					"anchor_to": "top_left",
                    "offset": [ 10, -9 ],
					"grid_dimensions": [ 1, 1 ],
					"layer": 5
                }
            },
			{
				"overlay@machines.slot_overlay": {
					"anchor_from": "top_left",
					"anchor_to": "top_left",
                    "offset": [ 10, -8 ],
					"$texture": "textures/ui/smithing_material_slot_overlay",
					"$uv": [64, 0]
				}
			},
            {
                "silicon_input@machines.slots_panel": {
                    "offset": [ -9, -47 ],
					"size": [ 20, 36 ],
					"controls": [
						{
							"item@machines.slots": {
								"offset": [ 0, -9 ],
								"size": [ 18, 54 ],
								"grid_dimensions": [ 1, 3 ],
								"layer": 5
							}
						},
						{
							"overlay@machines.slot_overlay": {
								"$texture": "textures/ui/extra_slots/silicon",
								"offset": [ 0, -8 ]
							}
						},
						{
							"overlay@machines.slot_overlay": {
								"$texture": "textures/ui/extra_slots/silicon",
								"offset": [ 0, 10 ]
							}
						}
					]
                }
            },
            {
                "redstone_input@machines.slots_panel": {
                    "offset": [ 38, -56 ],
					"size": [ 20, 18 ],
					"controls": [
						{
							"item@machines.slots": {
								"offset": [ 0, -27 ],
								"size": [ 18, 72 ],
								"grid_dimensions": [ 1, 4 ],
								"layer": 5
							}
						},
						{
							"overlay@machines.slot_overlay": {
								"$texture": "textures/ui/smithing_material_slot_overlay",
								"$uv": [16, 0]
							}
						}
					]
                }
            },
            {
                "raw_input@machines.slots_panel": {
                    "offset": [ 62, -81 ],
					"size": [ 20, 18 ],
					"controls": [
						{
							"item@machines.slots": {
								"offset": [ 0, -36 ],
								"size": [ 18, 90 ],
								"grid_dimensions": [ 1, 5 ],
								"layer": 5
							}
						}
					]
                }
            },
            {
                "battery_slot@machines.slots_panel": {
					"anchor_from": "top_left",
					"anchor_to": "top_left",
                    "offset": [ 4, 42 ],
					"size": [ 20, 18 ],
					"controls": [
						{
							"item@machines.slots": {
								"offset": [ 0, -45 ],
								"size": [ 18, 108 ],
								"grid_dimensions": [ 1, 6 ],
								"layer": 5
							}
						},
						{
							"overlay@machines.slot_overlay": {
								"$texture": "textures/ui/extra_slots/power"
							}
						}
					]
                }
            },
            {
                "output@machines.slots_panel": {
                    "offset": [ 69, -16 ],
					"size": [ 20, 18 ],
					"controls": [
						{
							"item@machines.slots": {
								"offset": [ 0, -54 ],
								"size": [ 18, 126 ],
								"grid_dimensions": [ 1, 7 ],
								"layer": 5
							}
						}
					]
                }
            },
            {
                "progress": {
					"type": "image",
					"texture": "textures/ui/cosmos/progress_bar",
                    "offset": [ 22, -84.5 ],
                    "size": [ 53, 12 ],
					"controls": [
						{
							"progress@machines.fill_level": {
								"$machine": "fabricator",
								"anchor_from": "top_left",
								"anchor_to": "top_left",
								"layer": 4
							}
						},
						{
							"progress_text@machines.hovers": {
								"$machine": "fabricating"
							}
						}
					]
                }
            },
            {
                "capacity": {
					"type": "image",
					"texture": "textures/ui/cosmos/progress_bar",
                    "offset": [ -43, -15 ],
                    "size": [ 55, 9 ],
					"controls": [
						{
							"overlay@machines.slot_overlay": {
								"anchor_from": "left_middle",
								"anchor_to": "right_middle",
								"$color": [0.9, 0.9, 0.9],
								"offset": [ 1, 1 ],
								"$texture": "textures/ui/extra_slots/power"
							}
						},
						{
							"energy@machines.fill_level": {
								"anchor_from": "top_left",
								"anchor_to": "top_left",
								"layer": 4
							}
						},
						{
							"energy_text@machines.hovers": {
								"$machine": "energy"
							}
						}
					]
                }
            }
        ]
    },
    
    "energy_storage@furnace.furnace_panel_top_half": {
        "controls": [
			{ "label@furnace.furnace_label": {
				"text": "$label"
			}},
            {
                "output_battery@machines.slots": {
					"anchor_to": "center",
					"anchor_from": "center",
                    "offset": [ -50, -15 ],
					"grid_dimensions": [ 1, 1 ],
					"layer": 5
                }
            },
            {
                "input_battery@machines.slots_panel": {
                    "offset": [ -50, 15 ],
					"controls": [
						{
							"item@machines.slots": {
								"offset": [ 0, -9 ],
								"size": [ 18, 36 ],
								"grid_dimensions": [ 1, 2 ],
								"layer": 5
							}
						}
					]
                }
            },
            {
                "output_overlay@machines.slot_overlay": {
                    "offset": [ -50, -14 ],
					"$texture": "textures/ui/extra_slots/power"
                }
            },
            {
                "input_overlay@machines.slot_overlay": {
                    "offset": [ -50, 16 ],
					"$texture": "textures/ui/extra_slots/power"
                }
            },
			{
				"output_arrow@crafting.crafting_arrow_large": {
					"anchor_to": "center",
					"anchor_from": "center",
					"offset": [-20, -15],
					"size": [ -22, 15 ]
				}
			},
			{
				"input_arrow@crafting.crafting_arrow_large": {
					"anchor_to": "center",
					"anchor_from": "center",
					"offset": [-20, 15]
				}
			},
            {
                "energy@machines.texts": {
                    "offset": [ 10, -10 ],
                    "size": [ 18, 18 ],
					"layer": 4
                }
            },
            {
                "capacity": {
					"type": "image",
					"texture": "textures/ui/cosmos/progress_bar",
                    "offset": [ 40, 15 ],
                    "size": [ 75, 5 ],
					"controls": [
						{
							"energy@machines.fill_level": {
								"anchor_from": "top_left",
								"anchor_to": "top_left",
								"layer": 4
							}
						}
					]
                }
            },
            {
                "maxPower@furnace.furnace_label": {
					"text": "$maxPower",
					"anchor_to": "center",
					"anchor_from": "center",
                    "offset": [ 25, 30 ]
                }
            }
        ]
    },
    "coal_generator_ui@machines.interface": {
        "$machine": "coal_generator"
    },
    "circuit_fabricator_ui@machines.interface": {
		"$size": ["100%", "120%"],
        "$machine": "circuit_fabricator"
    },
    "energy_storege_module_ui@machines.interface": {
        "$machine": "energy_storage",
		"$label": "Energy Storage Module",
		"$maxPower": "Max Output: 300 gJ/t"
    },
    "energy_storege_cluster_ui@machines.interface": {
        "$machine": "energy_storage",
		"$label": "Energy Storage Cluster",
		"$maxPower": "Max Output: 1,800 gJ/t"
    }
}